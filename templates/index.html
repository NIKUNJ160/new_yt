<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FlowTube ‚Äî YouTube Downloader</title>
  <meta name="description" content="Download YouTube videos and playlists in any quality with real-time progress tracking. Free, fast, and beautiful.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Syne:wght@700;800&display=swap" rel="stylesheet">

  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg:        #050510;
      --bg2:       #0d0d1f;
      --glass:     rgba(255,255,255,0.04);
      --glass-hov: rgba(255,255,255,0.07);
      --border:    rgba(255,255,255,0.08);
      --border-hi: rgba(124,58,237,0.6);
      --text:      #e8e8f0;
      --muted:     #9ca3af;
      --dim:       #6b7280;
      --violet:    #7c3aed;
      --pink:      #db2777;
      --cyan:      #06b6d4;
      --green:     #10b981;
      --red:       #ef4444;
      --amber:     #f59e0b;
      --grad:      linear-gradient(135deg, var(--violet), var(--pink));
      --grad3:     linear-gradient(135deg, var(--violet), var(--pink), var(--cyan));
      --glow:      rgba(124,58,237,0.3);
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ‚îÄ‚îÄ‚îÄ Canvas background ‚îÄ‚îÄ‚îÄ */
    #particles-canvas {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
    }

    /* ‚îÄ‚îÄ‚îÄ Glow blobs ‚îÄ‚îÄ‚îÄ */
    .blobs {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      overflow: hidden;
    }
    .blob {
      position: absolute;
      border-radius: 50%;
      filter: blur(130px);
      opacity: 0.18;
      animation: blobFloat 22s ease-in-out infinite;
    }
    .blob-1 { width: 700px; height: 700px; background: var(--violet); top: -220px; left: -180px; }
    .blob-2 { width: 550px; height: 550px; background: var(--pink); bottom: -180px; right: -150px; animation-delay: -11s; animation-duration: 26s; }
    .blob-3 { width: 400px; height: 400px; background: var(--cyan); top: 40%; left: 50%; transform: translate(-50%,-50%); animation-delay: -6s; animation-duration: 19s; opacity: 0.10; }

    @keyframes blobFloat {
      0%,100% { transform: translate(0,0) scale(1); }
      30%      { transform: translate(60px,-50px) scale(1.08); }
      65%      { transform: translate(-40px,40px) scale(0.93); }
    }

    /* ‚îÄ‚îÄ‚îÄ Navbar ‚îÄ‚îÄ‚îÄ */
    .navbar {
      position: fixed;
      top: 0;
      left: 0; right: 0;
      z-index: 100;
      padding: 0 32px;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(5,5,16,0.7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
    }
    .nav-logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .nav-logo-icon {
      width: 34px; height: 34px;
      background: var(--grad);
      border-radius: 10px;
      display: grid; place-items: center;
      font-size: 16px;
    }
    .nav-logo-text {
      font-family: 'Syne', sans-serif;
      font-size: 1.2rem;
      font-weight: 800;
      background: var(--grad);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .nav-badge {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.78rem;
      color: var(--muted);
      padding: 6px 14px;
      border: 1px solid var(--border);
      border-radius: 999px;
      background: var(--glass);
      backdrop-filter: blur(10px);
      transition: border-color 0.3s, color 0.3s;
    }
    .nav-badge:hover { border-color: rgba(124,58,237,0.4); color: var(--text); text-decoration: none; }
    .nav-badge svg { width: 14px; height: 14px; fill: currentColor; }

    /* ‚îÄ‚îÄ‚îÄ Main layout ‚îÄ‚îÄ‚îÄ */
    .main {
      position: relative;
      z-index: 10;
      padding-top: 64px;
    }

    /* ‚îÄ‚îÄ‚îÄ Hero ‚îÄ‚îÄ‚îÄ */
    .hero {
      text-align: center;
      padding: 80px 20px 56px;
    }
    .hero-eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 0.78rem;
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--violet);
      background: rgba(124,58,237,0.12);
      border: 1px solid rgba(124,58,237,0.25);
      border-radius: 999px;
      padding: 5px 16px;
      margin-bottom: 24px;
    }
    .hero-eyebrow-dot {
      width: 6px; height: 6px;
      border-radius: 50%;
      background: var(--violet);
      animation: pulse-dot 2s ease-in-out infinite;
    }
    @keyframes pulse-dot {
      0%,100% { opacity: 1; transform: scale(1); }
      50%      { opacity: 0.4; transform: scale(0.7); }
    }
    .hero h1 {
      font-family: 'Syne', sans-serif;
      font-size: clamp(2.4rem, 6vw, 4.2rem);
      font-weight: 800;
      line-height: 1.1;
      letter-spacing: -0.02em;
      margin-bottom: 20px;
    }
    .hero h1 span {
      background: var(--grad3);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .hero-sub {
      max-width: 500px;
      margin: 0 auto 48px;
      color: var(--muted);
      font-size: 1.05rem;
      line-height: 1.7;
    }

    /* ‚îÄ‚îÄ‚îÄ Stats strip ‚îÄ‚îÄ‚îÄ */
    .stats-strip {
      display: flex;
      justify-content: center;
      gap: 48px;
      flex-wrap: wrap;
      margin-bottom: 56px;
    }
    .stat-item { text-align: center; }
    .stat-val {
      font-family: 'Syne', sans-serif;
      font-size: 1.7rem;
      font-weight: 800;
      background: var(--grad);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .stat-label { font-size: 0.78rem; color: var(--dim); margin-top: 2px; }

    /* ‚îÄ‚îÄ‚îÄ Content wrapper ‚îÄ‚îÄ‚îÄ */
    .content {
      max-width: 820px;
      margin: 0 auto;
      padding: 0 20px 80px;
    }

    /* ‚îÄ‚îÄ‚îÄ Glass card ‚îÄ‚îÄ‚îÄ */
    .card {
      background: var(--glass);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 28px;
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      margin-bottom: 18px;
      transition: background 0.3s, border-color 0.3s;
      position: relative;
      overflow: hidden;
    }
    .card::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: inherit;
      padding: 1px;
      background: linear-gradient(135deg, rgba(124,58,237,0.3), transparent 50%, rgba(219,39,119,0.2));
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.4s;
    }
    .card:focus-within::before { opacity: 1; }

    /* ‚îÄ‚îÄ‚îÄ Search card header ‚îÄ‚îÄ‚îÄ */
    .search-label {
      font-size: 0.78rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--dim);
      margin-bottom: 14px;
    }

    /* ‚îÄ‚îÄ‚îÄ URL input ‚îÄ‚îÄ‚îÄ */
    .input-row {
      display: flex;
      gap: 10px;
      margin-bottom: 18px;
    }
    .url-input-wrap {
      flex: 1;
      position: relative;
    }
    .url-input-icon {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--dim);
      pointer-events: none;
      display: flex;
      align-items: center;
    }
    .url-input-icon svg { width: 18px; height: 18px; stroke: currentColor; fill: none; stroke-width: 2; }
    .url-input {
      width: 100%;
      padding: 15px 18px 15px 46px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      border-radius: 14px;
      color: var(--text);
      font-size: 0.95rem;
      font-family: inherit;
      outline: none;
      transition: border-color 0.3s, box-shadow 0.3s, background 0.3s;
    }
    .url-input:focus {
      border-color: var(--border-hi);
      background: rgba(124,58,237,0.06);
      box-shadow: 0 0 0 4px rgba(124,58,237,0.15), 0 0 30px rgba(124,58,237,0.1);
    }
    .url-input::placeholder { color: var(--dim); }

    /* ‚îÄ‚îÄ‚îÄ Controls row ‚îÄ‚îÄ‚îÄ */
    .controls-row {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }

    /* ‚îÄ‚îÄ‚îÄ Quality select ‚îÄ‚îÄ‚îÄ */
    .quality-wrap {
      position: relative;
      flex-shrink: 0;
    }
    .quality-icon {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
      color: var(--muted);
      font-size: 16px;
    }
    .quality-select {
      padding: 12px 36px 12px 38px;
      background: rgba(255,255,255,0.06);
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--text);
      font-family: inherit;
      font-size: 0.88rem;
      outline: none;
      cursor: pointer;
      appearance: none;
      -webkit-appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2.5'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      transition: border-color 0.3s;
    }
    .quality-select:focus { border-color: var(--border-hi); }
    .quality-select option { background: #1a1a2e; }

    /* ‚îÄ‚îÄ‚îÄ Buttons ‚îÄ‚îÄ‚îÄ */
    .btn {
      padding: 12px 22px;
      border: none;
      border-radius: 12px;
      font-family: inherit;
      font-size: 0.88rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s;
      display: inline-flex;
      align-items: center;
      gap: 7px;
      white-space: nowrap;
    }
    .btn-ghost {
      background: rgba(255,255,255,0.06);
      border: 1px solid var(--border);
      color: var(--text);
    }
    .btn-ghost:hover:not(:disabled) { background: var(--glass-hov); }

    .btn-primary {
      background: var(--grad);
      color: #fff;
      box-shadow: 0 4px 24px rgba(124,58,237,0.35);
    }
    .btn-primary:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 8px 36px rgba(124,58,237,0.45);
    }
    .btn-primary:active:not(:disabled) { transform: translateY(0); }
    .btn-primary:disabled { opacity: 0.45; cursor: not-allowed; transform: none; box-shadow: none; }
    .btn-primary.loading {
      background: linear-gradient(135deg, #5b21b6, #9d174d);
      animation: pulse-btn 1.6s ease-in-out infinite;
    }
    @keyframes pulse-btn {
      0%,100% { box-shadow: 0 4px 24px rgba(124,58,237,0.35); }
      50%      { box-shadow: 0 4px 40px rgba(124,58,237,0.6); }
    }

    .btn-pause {
      background: rgba(245,158,11,0.12);
      border: 1px solid rgba(245,158,11,0.25);
      color: var(--amber);
    }
    .btn-pause:hover { background: rgba(245,158,11,0.22); }

    .btn-resume {
      background: rgba(16,185,129,0.12);
      border: 1px solid rgba(16,185,129,0.25);
      color: var(--green);
    }
    .btn-resume:hover { background: rgba(16,185,129,0.22); }

    /* ‚îÄ‚îÄ‚îÄ Fetch button ‚îÄ‚îÄ‚îÄ */
    .btn-fetch {
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.12);
      color: var(--text);
    }
    .btn-fetch:hover:not(:disabled) { background: rgba(255,255,255,0.12); }

    /* ‚îÄ‚îÄ‚îÄ Divider ‚îÄ‚îÄ‚îÄ */
    .divider {
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--border), transparent);
      margin: 24px 0;
    }

    /* ‚îÄ‚îÄ‚îÄ Info card ‚îÄ‚îÄ‚îÄ */
    .info-card { display: none; animation: fadeUp 0.45s ease both; }
    .info-card.visible { display: block; }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(16px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .info-header {
      display: flex;
      gap: 18px;
      align-items: center;
      margin-bottom: 20px;
    }
    .info-thumb-wrap {
      position: relative;
      flex-shrink: 0;
    }
    .info-thumb {
      width: 128px;
      height: 72px;
      border-radius: 12px;
      object-fit: cover;
      background: var(--glass);
      display: block;
    }
    .info-thumb-overlay {
      position: absolute;
      inset: 0;
      border-radius: 12px;
      background: linear-gradient(135deg, rgba(124,58,237,0.25) 0%, transparent 100%);
    }
    .info-title-row h3 {
      font-size: 1.05rem;
      font-weight: 700;
      line-height: 1.35;
      margin-bottom: 6px;
    }
    .info-pills {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }
    .pill {
      font-size: 0.7rem;
      font-weight: 600;
      padding: 3px 10px;
      border-radius: 999px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }
    .pill-violet { background: rgba(124,58,237,0.15); color: #a78bfa; border: 1px solid rgba(124,58,237,0.2); }
    .pill-cyan   { background: rgba(6,182,212,0.12);  color: #67e8f9; border: 1px solid rgba(6,182,212,0.2); }
    .pill-count  { background: var(--glass); color: var(--muted); border: 1px solid var(--border); }

    /* ‚îÄ‚îÄ‚îÄ Pause banner ‚îÄ‚îÄ‚îÄ */
    .pause-banner {
      display: none;
      text-align: center;
      padding: 11px;
      border-radius: 12px;
      font-size: 0.83rem;
      font-weight: 600;
      margin-bottom: 16px;
      background: rgba(245,158,11,0.08);
      border: 1px solid rgba(245,158,11,0.18);
      color: var(--amber);
      animation: anim-pause 2.2s ease-in-out infinite;
    }
    .pause-banner.visible { display: block; }
    @keyframes anim-pause {
      0%,100% { opacity: 1; } 50% { opacity: 0.55; }
    }

    /* ‚îÄ‚îÄ‚îÄ Video list ‚îÄ‚îÄ‚îÄ */
    .video-list {
      max-height: 480px;
      overflow-y: auto;
      padding-right: 4px;
    }
    .video-list::-webkit-scrollbar { width: 5px; }
    .video-list::-webkit-scrollbar-track { background: transparent; }
    .video-list::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

    .video-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 13px 16px;
      border-radius: 14px;
      margin-bottom: 6px;
      background: rgba(255,255,255,0.02);
      border: 1px solid transparent;
      transition: all 0.25s;
      position: relative;
      overflow: hidden;
    }
    .video-item::before {
      content: '';
      position: absolute;
      left: 0; top: 0; bottom: 0;
      width: 3px;
      border-radius: 2px 0 0 2px;
      background: transparent;
      transition: background 0.3s;
    }
    .video-item:hover { background: rgba(255,255,255,0.04); }
    .video-item.downloading { border-color: rgba(124,58,237,0.2); }
    .video-item.downloading::before { background: var(--violet); }
    .video-item.done { border-color: rgba(16,185,129,0.2); }
    .video-item.done::before { background: var(--green); }
    .video-item.error { border-color: rgba(239,68,68,0.2); }
    .video-item.error::before { background: var(--red); }
    .video-item.paused { border-color: rgba(245,158,11,0.2); }
    .video-item.paused::before { background: var(--amber); }

    .video-num {
      font-size: 0.76rem;
      color: var(--dim);
      width: 22px;
      text-align: center;
      flex-shrink: 0;
      font-weight: 600;
    }
    .video-info { flex: 1; min-width: 0; }
    .video-title {
      font-size: 0.86rem;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-bottom: 8px;
      color: var(--text);
    }
    .progress-track {
      width: 100%;
      height: 4px;
      background: rgba(255,255,255,0.06);
      border-radius: 4px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      border-radius: 4px;
      background: linear-gradient(90deg, var(--violet), var(--pink));
      transition: width 0.5s ease;
      width: 0%;
      position: relative;
    }
    .progress-fill::after {
      content: '';
      position: absolute;
      right: 0; top: 0; bottom: 0;
      width: 20px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.35));
      animation: shimmer-run 1.2s ease-in-out infinite;
    }
    @keyframes shimmer-run { 0%,100% { opacity: 0.6; } 50% { opacity: 1; } }
    .done .progress-fill { background: var(--green); }
    .done .progress-fill::after { display: none; }
    .error .progress-fill { background: var(--red); }
    .error .progress-fill::after { display: none; }
    .paused .progress-fill { background: var(--amber); }

    .dl-stats {
      font-size: 0.73rem;
      color: var(--dim);
      margin-top: 5px;
      display: none;
    }
    .downloading .dl-stats { display: block; }

    .status-badge {
      font-size: 0.72rem;
      padding: 3px 10px;
      border-radius: 999px;
      font-weight: 600;
      flex-shrink: 0;
      white-space: nowrap;
    }
    .badge-queued     { background: rgba(255,255,255,0.06); color: var(--dim); }
    .badge-downloading{ background: rgba(124,58,237,0.15); color: #a78bfa; }
    .badge-merging    { background: rgba(245,158,11,0.14); color: var(--amber); }
    .badge-done       { background: rgba(16,185,129,0.14); color: var(--green); }
    .badge-error      { background: rgba(239,68,68,0.14); color: var(--red); }
    .badge-paused     { background: rgba(245,158,11,0.14); color: var(--amber); }

    /* ‚îÄ‚îÄ‚îÄ Status notification ‚îÄ‚îÄ‚îÄ */
    .status-notif {
      display: none;
      align-items: center;
      gap: 12px;
      padding: 16px 20px;
      border-radius: 14px;
      font-size: 0.9rem;
      font-weight: 500;
      animation: fadeUp 0.35s ease both;
      margin-top: 18px;
    }
    .status-notif.visible { display: flex; }
    .status-notif.success { background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.22); color: var(--green); }
    .status-notif.error   { background: rgba(239,68,68,0.1);  border: 1px solid rgba(239,68,68,0.22);  color: var(--red); }
    .notif-icon { font-size: 1.1rem; flex-shrink: 0; }

    /* ‚îÄ‚îÄ‚îÄ Spinner ‚îÄ‚îÄ‚îÄ */
    .spinner {
      width: 16px; height: 16px;
      border: 2px solid rgba(255,255,255,0.15);
      border-top-color: currentColor;
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
      display: inline-block;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* ‚îÄ‚îÄ‚îÄ Feature chips ‚îÄ‚îÄ‚îÄ */
    .features {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 36px;
      margin-bottom: 0;
    }
    .feature-chip {
      display: flex;
      align-items: center;
      gap: 7px;
      font-size: 0.8rem;
      color: var(--muted);
      padding: 7px 16px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--glass);
    }
    .feature-chip-dot { width: 6px; height: 6px; border-radius: 50%; }

    /* ‚îÄ‚îÄ‚îÄ Footer ‚îÄ‚îÄ‚îÄ */
    .footer {
      position: relative;
      z-index: 10;
      text-align: center;
      padding: 24px 20px 36px;
      color: var(--dim);
      font-size: 0.78rem;
      border-top: 1px solid var(--border);
    }
    .footer a { color: var(--muted); text-decoration: none; transition: color 0.2s; }
    .footer a:hover { color: var(--text); }

    /* ‚îÄ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ‚îÄ */
    @media (max-width: 600px) {
      .navbar { padding: 0 16px; }
      .hero { padding: 64px 16px 40px; }
      .stats-strip { gap: 28px; }
      .content { padding: 0 14px 60px; }
      .info-header { flex-direction: column; align-items: flex-start; }
      .info-thumb { width: 100%; height: auto; aspect-ratio: 16/9; }
      .input-row { flex-direction: column; }
      .controls-row { flex-direction: column; }
      .controls-row .btn,
      .controls-row .quality-select { width: 100%; justify-content: center; }
    }
  </style>
</head>

<body>

  <!-- Animated background -->
  <canvas id="particles-canvas"></canvas>
  <div class="blobs">
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>
  </div>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="nav-logo">
      <div class="nav-logo-icon">‚ñ∂</div>
      <span class="nav-logo-text">FlowTube</span>
    </div>
    <a class="nav-badge" href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener">
      <svg viewBox="0 0 24 24"><path d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"/></svg>
      Powered by yt-dlp
    </a>
  </nav>

  <!-- Main -->
  <main class="main">

    <!-- Hero -->
    <section class="hero">
      <div class="hero-eyebrow">
        <span class="hero-eyebrow-dot"></span>
        Free &amp; Open Source
      </div>
      <h1>Download YouTube<br><span>Videos &amp; Playlists</span></h1>
      <p class="hero-sub">Paste any YouTube link and get your content in any quality ‚Äî from crisp 1080p video to audio-only MP3. No signup. No limits.</p>

      <div class="stats-strip">
        <div class="stat-item">
          <div class="stat-val">8</div>
          <div class="stat-label">Quality Options</div>
        </div>
        <div class="stat-item">
          <div class="stat-val">‚àû</div>
          <div class="stat-label">Playlist Size</div>
        </div>
        <div class="stat-item">
          <div class="stat-val">MP3</div>
          <div class="stat-label">Audio Support</div>
        </div>
        <div class="stat-item">
          <div class="stat-val">Live</div>
          <div class="stat-label">Progress Tracking</div>
        </div>
      </div>
    </section>

    <!-- Content -->
    <div class="content">

      <!-- Search card -->
      <div class="card" id="searchCard">
        <div class="search-label">Paste your link</div>
        <div class="input-row">
          <div class="url-input-wrap">
            <span class="url-input-icon">
              <svg viewBox="0 0 24 24"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg>
            </span>
            <input
              class="url-input"
              id="urlInput"
              type="text"
              placeholder="https://youtube.com/watch?v=... or playlist URL"
              autofocus
            >
          </div>
          <button class="btn btn-fetch" id="fetchBtn" onclick="fetchInfo()">
            <span id="fetchLabel">Fetch Info</span>
          </button>
        </div>

        <div class="divider"></div>

        <div class="controls-row">
          <div class="quality-wrap">
            <span class="quality-icon">üéû</span>
            <select class="quality-select" id="qualitySelect">
              <option value="best">Best Quality</option>
              <option value="1080">1080p HD</option>
              <option value="720">720p HD</option>
              <option value="480">480p SD</option>
              <option value="360" selected>360p</option>
              <option value="240">240p</option>
              <option value="audio">Audio Only ¬∑ MP3 320k</option>
            </select>
          </div>
          <button class="btn btn-primary" id="downloadBtn" onclick="startDownload()" disabled>
            ‚¨á Download
          </button>
          <button class="btn btn-pause" id="pauseBtn" onclick="togglePause()" style="display:none;">
            ‚è∏ Pause
          </button>
        </div>
      </div>

      <!-- Info / video card -->
      <div class="card info-card" id="playlistInfo">
        <div class="pause-banner" id="pauseBanner">‚è∏ Download paused ‚Äî click Resume to continue</div>

        <div class="info-header">
          <div class="info-thumb-wrap" id="thumbWrap">
            <img class="info-thumb" id="playlistThumb" src="" alt="Thumbnail">
            <div class="info-thumb-overlay"></div>
          </div>
          <div class="info-title-row">
            <h3 id="playlistTitle"></h3>
            <div class="info-pills">
              <span class="pill" id="typeBadge"></span>
              <span class="pill pill-count" id="playlistCount"></span>
            </div>
          </div>
        </div>

        <div class="video-list" id="videoList"></div>
      </div>

      <!-- Status notification -->
      <div class="status-notif" id="statusNotif">
        <span class="notif-icon" id="notifIcon"></span>
        <span id="notifMsg"></span>
      </div>

      <!-- Feature chips -->
      <div class="features">
        <div class="feature-chip"><span class="feature-chip-dot" style="background:#7c3aed;"></span>Pause &amp; Resume</div>
        <div class="feature-chip"><span class="feature-chip-dot" style="background:#06b6d4;"></span>Playlist Support</div>
        <div class="feature-chip"><span class="feature-chip-dot" style="background:#db2777;"></span>MP3 Audio Extraction</div>
        <div class="feature-chip"><span class="feature-chip-dot" style="background:#10b981;"></span>Real-time Progress</div>
      </div>

    </div><!-- /content -->
  </main>

  <!-- Footer -->
  <footer class="footer">
    Built with <a href="https://github.com/yt-dlp/yt-dlp" target="_blank">yt-dlp</a> &amp; <a href="https://flask.palletsprojects.com/" target="_blank">Flask</a> &nbsp;¬∑&nbsp; FlowTube &copy; 2025
  </footer>

  <!-- Particle canvas script -->
  <script>
    (function () {
      const canvas = document.getElementById('particles-canvas');
      const ctx = canvas.getContext('2d');
      let W, H, particles;

      const COLORS = ['rgba(124,58,237,', 'rgba(219,39,119,', 'rgba(6,182,212,'];

      function resize() {
        W = canvas.width  = window.innerWidth;
        H = canvas.height = window.innerHeight;
      }

      function initParticles() {
        particles = Array.from({ length: 55 }, () => ({
          x: Math.random() * W,
          y: Math.random() * H,
          r: Math.random() * 1.6 + 0.4,
          vx: (Math.random() - 0.5) * 0.3,
          vy: (Math.random() - 0.5) * 0.3,
          color: COLORS[Math.floor(Math.random() * COLORS.length)],
          alpha: Math.random() * 0.4 + 0.1,
        }));
      }

      function draw() {
        ctx.clearRect(0, 0, W, H);
        for (const p of particles) {
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
          ctx.fillStyle = p.color + p.alpha + ')';
          ctx.fill();

          p.x += p.vx;
          p.y += p.vy;
          if (p.x < -10) p.x = W + 10;
          if (p.x > W + 10) p.x = -10;
          if (p.y < -10) p.y = H + 10;
          if (p.y > H + 10) p.y = -10;
        }
        // Draw faint connecting lines
        for (let i = 0; i < particles.length; i++) {
          for (let j = i + 1; j < particles.length; j++) {
            const a = particles[i], b = particles[j];
            const d = Math.hypot(a.x - b.x, a.y - b.y);
            if (d < 120) {
              ctx.beginPath();
              ctx.moveTo(a.x, a.y);
              ctx.lineTo(b.x, b.y);
              ctx.strokeStyle = `rgba(124,58,237,${0.06 * (1 - d / 120)})`;
              ctx.lineWidth = 0.6;
              ctx.stroke();
            }
          }
        }
        requestAnimationFrame(draw);
      }

      window.addEventListener('resize', () => { resize(); initParticles(); });
      resize();
      initParticles();
      draw();
    })();
  </script>

  <!-- App logic -->
  <script>
    let playlistData = null;
    let currentJobId = null;
    let isPaused = false;

    /* ‚îÄ Fetch info ‚îÄ */
    async function fetchInfo() {
      const url = document.getElementById('urlInput').value.trim();
      if (!url) return;

      const fetchBtn = document.getElementById('fetchBtn');
      const fetchLabel = document.getElementById('fetchLabel');
      fetchBtn.disabled = true;
      fetchLabel.innerHTML = '<span class="spinner"></span>';
      hideStatus();

      try {
        const res = await fetch('/api/info', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ url }),
        });
        const data = await res.json();
        if (data.error) { showStatus(data.error, 'error'); return; }

        playlistData = data;
        renderInfo(data);
        document.getElementById('downloadBtn').disabled = false;
      } catch {
        showStatus('Failed to fetch info. Check the URL and try again.', 'error');
      } finally {
        fetchBtn.disabled = false;
        fetchLabel.textContent = 'Fetch Info';
      }
    }

    /* ‚îÄ Render info card ‚îÄ */
    function renderInfo(data) {
      const badge = document.getElementById('typeBadge');
      document.getElementById('playlistTitle').textContent = data.title;

      if (data.type === 'playlist') {
        badge.textContent = 'Playlist';
        badge.className = 'pill pill-violet';
        document.getElementById('playlistCount').textContent = data.video_count + ' videos';
      } else {
        badge.textContent = 'Video';
        badge.className = 'pill pill-cyan';
        document.getElementById('playlistCount').textContent = 'Single video';
      }

      const thumb = document.getElementById('playlistThumb');
      const wrap  = document.getElementById('thumbWrap');
      if (data.thumbnail) {
        thumb.src = data.thumbnail;
        wrap.style.display = '';
      } else {
        wrap.style.display = 'none';
      }

      const list = document.getElementById('videoList');
      list.innerHTML = data.videos.map((v, i) => `
        <div class="video-item" id="video-${i}">
          <span class="video-num">${i + 1}</span>
          <div class="video-info">
            <div class="video-title" title="${escapeHtml(v.title)}">${escapeHtml(v.title)}</div>
            <div class="progress-track">
              <div class="progress-fill" id="progress-${i}"></div>
            </div>
            <div class="dl-stats" id="stats-${i}"></div>
          </div>
          <span class="status-badge badge-queued" id="badge-${i}">Queued</span>
        </div>
      `).join('');

      document.getElementById('playlistInfo').classList.add('visible');
    }

    /* ‚îÄ Start download ‚îÄ */
    async function startDownload() {
      if (!playlistData) return;

      const url     = document.getElementById('urlInput').value.trim();
      const quality = document.getElementById('qualitySelect').value;
      const dlBtn   = document.getElementById('downloadBtn');
      const pauseBtn= document.getElementById('pauseBtn');

      dlBtn.disabled = true;
      dlBtn.innerHTML = '<span class="spinner"></span> Downloading‚Ä¶';
      dlBtn.classList.add('loading');
      pauseBtn.style.display = 'inline-flex';
      isPaused = false;
      updatePauseBtn();
      hideStatus();

      try {
        const res = await fetch('/api/download', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ url, quality, output: 'downloads', videos: playlistData.videos }),
        });
        const data = await res.json();
        if (data.error) {
          showStatus(data.error, 'error');
          resetDlBtn();
          pauseBtn.style.display = 'none';
          return;
        }
        currentJobId = data.job_id;
        listenProgress(data.job_id);
      } catch {
        showStatus('Failed to start download.', 'error');
        resetDlBtn();
        pauseBtn.style.display = 'none';
      }
    }

    /* ‚îÄ Pause / Resume ‚îÄ */
    async function togglePause() {
      if (!currentJobId) return;
      const endpoint = isPaused ? 'resume' : 'pause';
      try {
        await fetch(`/api/${endpoint}/${currentJobId}`, { method: 'POST' });
        isPaused = !isPaused;
        updatePauseBtn();
        document.getElementById('pauseBanner').classList.toggle('visible', isPaused);
      } catch (e) { console.error(e); }
    }

    function updatePauseBtn() {
      const btn = document.getElementById('pauseBtn');
      if (isPaused) {
        btn.innerHTML = '‚ñ∂ Resume';
        btn.className = 'btn btn-resume';
      } else {
        btn.innerHTML = '‚è∏ Pause';
        btn.className = 'btn btn-pause';
      }
    }

    /* ‚îÄ SSE progress ‚îÄ */
    function listenProgress(jobId) {
      const es = new EventSource(`/api/progress/${jobId}`);
      es.onmessage = function (event) {
        const data = JSON.parse(event.data);
        if (data.error) { es.close(); showStatus(data.error, 'error'); return; }

        data.videos.forEach((v, i) => {
          const item    = document.getElementById(`video-${i}`);
          const fill    = document.getElementById(`progress-${i}`);
          const badge   = document.getElementById(`badge-${i}`);
          const stats   = document.getElementById(`stats-${i}`);
          if (!item) return;

          item.className = 'video-item ' + v.status;
          fill.style.width = v.raw_percent + '%';

          const map = {
            queued:      ['Queued',    'badge-queued'],
            downloading: [v.percent,   'badge-downloading'],
            merging:     ['Merging‚Ä¶',  'badge-merging'],
            done:        ['Done ‚úì',    'badge-done'],
            error:       ['Error',     'badge-error'],
            paused:      ['Paused',    'badge-paused'],
          };
          const [label, cls] = map[v.status] || ['‚Äî', 'badge-queued'];
          badge.textContent = label;
          badge.className   = 'status-badge ' + cls;

          if (v.status === 'downloading') {
            stats.textContent = `${v.speed}  ¬∑  ETA ${v.eta}`;
          }
        });

        if (data.status === 'done') {
          es.close();
          const ok  = data.videos.filter(v => v.status === 'done').length;
          const err = data.videos.filter(v => v.status === 'error').length;
          let msg = `‚úÖ All done! ${ok} video${ok !== 1 ? 's' : ''} downloaded successfully.`;
          if (err) msg += ` (${err} failed)`;
          showStatus(msg, 'success');
          resetDlBtn();
          document.getElementById('pauseBtn').style.display = 'none';
          document.getElementById('pauseBanner').classList.remove('visible');
          currentJobId = null;
        }
      };
      es.onerror = () => es.close();
    }

    /* ‚îÄ Helpers ‚îÄ */
    function resetDlBtn() {
      const btn = document.getElementById('downloadBtn');
      btn.disabled = false;
      btn.innerHTML = '‚¨á Download';
      btn.classList.remove('loading');
    }

    function showStatus(msg, type) {
      const el   = document.getElementById('statusNotif');
      const icon = document.getElementById('notifIcon');
      document.getElementById('notifMsg').textContent = msg;
      icon.textContent = type === 'success' ? '‚úÖ' : '‚ö†Ô∏è';
      el.className = `status-notif visible ${type}`;
    }
    function hideStatus() {
      document.getElementById('statusNotif').className = 'status-notif';
    }

    function escapeHtml(str) {
      const d = document.createElement('div');
      d.textContent = str;
      return d.innerHTML;
    }

    document.getElementById('urlInput').addEventListener('keydown', e => {
      if (e.key === 'Enter') fetchInfo();
    });
  </script>

</body>
</html>